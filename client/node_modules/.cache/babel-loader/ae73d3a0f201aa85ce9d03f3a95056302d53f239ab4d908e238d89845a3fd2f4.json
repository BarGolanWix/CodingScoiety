{"ast":null,"code":"var _jsxFileName = \"/Users/bargo/Documents/RUNI/2ns-year/web-application-dev/react-projects/social-media/client/src/pages/Home.js\",\n  _s = $RefreshSig$();\nimport { List, Typography } from \"@mui/material\";\nimport FloatingMenu from \"../components/FloatingMenu\";\nimport Post from \"../components/Post\";\nimport TagsCloud from \"../components/TagsCloud\";\nimport { useState, useEffect } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Home(_ref) {\n  _s();\n  let {\n    Posts,\n    Tags,\n    tagsList,\n    handleAddNewTag,\n    selectedTagId,\n    selectedPopularityQuery,\n    userId,\n    baseURL,\n    filterPostsByTag,\n    renderToolBar\n  } = _ref;\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [selectedPostId, setSelectedPostId] = useState(\"\");\n\n  ///////////////////////////////////// handle query param /////////////////////////////////////\n  searchParams.get(\"popularity\");\n  useEffect(() => {\n    if (selectedPopularityQuery !== \"\") {\n      setSearchParams({\n        popularity: `${selectedPopularityQuery}`\n      });\n    }\n  }, [selectedPopularityQuery, setSearchParams]);\n\n  ///////////////////////////////////// handle tag on post /////////////////////////////////////\n  const handleAddTagClick = (event, selectedPostId) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedPostId(selectedPostId);\n  };\n  const handleMenuClose = selectedOption => {\n    setAnchorEl(null);\n    addTagToPostTagsList(selectedOption);\n  };\n  const addTagToPostTagsList = selectedOption => {\n    // Front\n    const checkIfTagged = Tags[selectedOption].find(postId => postId === selectedPostId);\n    if (checkIfTagged) return;\n    Tags[selectedOption].push(selectedPostId);\n    // Back\n    updatePostTagListToServer(selectedOption);\n  };\n  const updatePostTagListToServer = async selectedOption => {\n    const queryUrl = `option=${selectedOption}&postId=${selectedPostId}`;\n    try {\n      const response = await axios.post(`${baseURL}/posts/tags?${queryUrl}`);\n      console.log(response);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  ///////////////////////////////////// handle filter tag /////////////////////////////////////\n  const handleTagClick = (tagName, tagId) => {\n    filterPostsByTag(tagName, tagId);\n  };\n\n  ///////////////////////////////////// render components /////////////////////////////////////\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: renderToolBar()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(List, {\n        sx: {\n          width: \"650px\"\n        },\n        children: [Posts.length !== 0 && Posts.map(post => {\n          return /*#__PURE__*/_jsxDEV(Post, {\n            postId: post.id,\n            postTitle: post.title,\n            postContent: post.content,\n            isAddTagBtn: true,\n            handleAddTagClick: handleAddTagClick,\n            handleTagClick: handleTagClick,\n            selectedTagId: selectedTagId,\n            isTagDisabled: false,\n            Tags: Tags,\n            userId: userId,\n            postLikes: post.likes,\n            postDislikes: post.dislikes,\n            baseURL: baseURL\n          }, `home-${post.id}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this);\n        }), Posts.length === 0 && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          component: \"div\",\n          \"data-testid\": \"emptyPostList\",\n          children: \"No Posts Were Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TagsCloud, {\n        tagsList: tagsList,\n        handleAddNewTag: handleAddNewTag,\n        selectedTagId: selectedTagId,\n        handleTagClick: handleTagClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FloatingMenu, {\n        menuOptions: tagsList,\n        anchorElement: anchorEl,\n        handleMenuClose: handleMenuClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Home, \"6uBAmdhxeUy+mLeQdnvcw6QeGzk=\", false, function () {\n  return [useSearchParams];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["List","Typography","FloatingMenu","Post","TagsCloud","useState","useEffect","useSearchParams","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_ref","_s","Posts","Tags","tagsList","handleAddNewTag","selectedTagId","selectedPopularityQuery","userId","baseURL","filterPostsByTag","renderToolBar","searchParams","setSearchParams","anchorEl","setAnchorEl","selectedPostId","setSelectedPostId","get","popularity","handleAddTagClick","event","currentTarget","handleMenuClose","selectedOption","addTagToPostTagsList","checkIfTagged","find","postId","push","updatePostTagListToServer","queryUrl","response","post","console","log","error","handleTagClick","tagName","tagId","children","className","fileName","_jsxFileName","lineNumber","columnNumber","sx","width","length","map","id","postTitle","title","postContent","content","isAddTagBtn","isTagDisabled","postLikes","likes","postDislikes","dislikes","variant","component","menuOptions","anchorElement","_c","$RefreshReg$"],"sources":["/Users/bargo/Documents/RUNI/2ns-year/web-application-dev/react-projects/social-media/client/src/pages/Home.js"],"sourcesContent":["import { List, Typography } from \"@mui/material\";\nimport FloatingMenu from \"../components/FloatingMenu\";\nimport Post from \"../components/Post\";\nimport TagsCloud from \"../components/TagsCloud\";\nimport { useState, useEffect } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction Home({\n  Posts,\n  Tags,\n  tagsList,\n  handleAddNewTag,\n  selectedTagId,\n  selectedPopularityQuery,\n  userId,\n  baseURL,\n  filterPostsByTag,\n  renderToolBar,\n}) {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [selectedPostId, setSelectedPostId] = useState(\"\");\n\n  ///////////////////////////////////// handle query param /////////////////////////////////////\n  searchParams.get(\"popularity\");\n\n  useEffect(() => {\n    if (selectedPopularityQuery !== \"\") {\n      setSearchParams({ popularity: `${selectedPopularityQuery}` });\n    }\n  }, [selectedPopularityQuery, setSearchParams]);\n\n  ///////////////////////////////////// handle tag on post /////////////////////////////////////\n  const handleAddTagClick = (event, selectedPostId) => {\n    setAnchorEl(event.currentTarget);\n    setSelectedPostId(selectedPostId);\n  };\n\n  const handleMenuClose = (selectedOption) => {\n    setAnchorEl(null);\n    addTagToPostTagsList(selectedOption);\n  };\n\n  const addTagToPostTagsList = (selectedOption) => {\n    // Front\n    const checkIfTagged = Tags[selectedOption].find(\n      (postId) => postId === selectedPostId\n    );\n    if (checkIfTagged) return;\n    Tags[selectedOption].push(selectedPostId);\n    // Back\n    updatePostTagListToServer(selectedOption);\n  };\n\n  const updatePostTagListToServer = async (selectedOption) => {\n    const queryUrl = `option=${selectedOption}&postId=${selectedPostId}`;\n    try {\n      const response = await axios.post(`${baseURL}/posts/tags?${queryUrl}`);\n      console.log(response);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  ///////////////////////////////////// handle filter tag /////////////////////////////////////\n  const handleTagClick = (tagName, tagId) => {\n    filterPostsByTag(tagName, tagId);\n  };\n\n  ///////////////////////////////////// render components /////////////////////////////////////\n  return (\n    <>\n      <div className=\"App\">{renderToolBar()}</div>\n      <div className=\"container\">\n        <List sx={{ width: \"650px\" }}>\n          {Posts.length !== 0 &&\n            Posts.map((post) => {\n              return (\n                <Post\n                  key={`home-${post.id}`}\n                  postId={post.id}\n                  postTitle={post.title}\n                  postContent={post.content}\n                  isAddTagBtn={true}\n                  handleAddTagClick={handleAddTagClick}\n                  handleTagClick={handleTagClick}\n                  selectedTagId={selectedTagId}\n                  isTagDisabled={false}\n                  Tags={Tags}\n                  userId={userId}\n                  postLikes={post.likes}\n                  postDislikes={post.dislikes}\n                  baseURL={baseURL}\n                />\n              );\n            })}\n          {Posts.length === 0 && (\n            <Typography\n              variant=\"h5\"\n              component=\"div\"\n              data-testid=\"emptyPostList\"\n            >\n              No Posts Were Found\n            </Typography>\n          )}\n        </List>\n        <TagsCloud\n          tagsList={tagsList}\n          handleAddNewTag={handleAddNewTag}\n          selectedTagId={selectedTagId}\n          handleTagClick={handleTagClick}\n        />\n        <FloatingMenu\n          menuOptions={tagsList}\n          anchorElement={anchorEl}\n          handleMenuClose={handleMenuClose}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}